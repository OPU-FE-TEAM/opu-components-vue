"use strict";var _interopRequireDefault=require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/interopRequireDefault");require("core-js/modules/es.number.constructor"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _babelHelperVueJsxMergeProps=_interopRequireDefault(require("@vue/babel-helper-vue-jsx-merge-props")),_objectSpread2=_interopRequireDefault(require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/esm/objectSpread2")),_interface=require("ant-design-vue/lib/date-picker/interface"),_utils=_interopRequireDefault(require("../../utils")),_datePicker=_interopRequireDefault(require("./datePicker")),_moment=_interopRequireDefault(require("moment")),_default={name:"ARangePickerSplit",components:{OpuDatePicker:_datePicker.default},props:(0,_objectSpread2.default)((0,_objectSpread2.default)({},(0,_interface.DatePickerProps)()),{},{value:[Number,String,Object,Array],min:[String,Object],max:[String,Object],hasLimit:{type:Boolean,required:!1,default:!0}}),model:{prop:"value",event:"update"},data:function(){return{data:[],minDate:"",maxDate:""}},computed:{startValue:function(){var e="";return this.value&&this.value.length&&(e=this.value[0]),e},endValue:function(){var e="";return this.value&&1<this.value.length&&(e=this.value[1]),e}},watch:{value:function(e){e&&e.length&&(this.minDate=e[0]),e&&1<e.length&&(this.maxDate=e[1])}},created:function(){this.value&&this.value.length&&(this.minDate=this.value[0]),this.value&&1<this.value.length&&(this.maxDate=this.value[1])},methods:{onChange:function(){var e=[this.minDate,this.maxDate];this.$emit("updata",e),this.$emit("change",e)},onStartChange:function(e){this.maxDate&&(0,_moment.default)(this.maxDate).isBefore(e)&&(this.maxDate=e),this.minDate=e,this.onChange()},onEndChange:function(e){this.minDate&&!(0,_moment.default)(this.minDate).isBefore(e)&&(this.minDate=e),this.maxDate=e,this.onChange()},startDisabledDate:function(e){return this.maxDate&&e?e>this.maxDate||this.min&&e<this.min:this.min||this.max?e<this.min||e>this.max:void 0},endDisabledDate:function(e){return this.minDate&&e?e<this.minDate||this.max&&e>this.max:this.min||this.max?e<this.min||e>this.max:void 0},focus:function(){this.$refs.startDatePicker.focus()}},render:function(a){var i=this,e=this.hasLimit,t=_utils.default.clone(this.$options.propsData);delete t.value;var n={ref:"startDatePicker",props:(0,_objectSpread2.default)((0,_objectSpread2.default)({},t),{},{allowClear:!1}),style:{width:"100%"},on:{change:function(e){i.onStartChange(e)},inputPressEnter:function(){setTimeout(function(){i.$refs.endDatePicker.focus()},100)}}};this.startValue&&(n.props.value=this.startValue);var r={ref:"endDatePicker",props:(0,_objectSpread2.default)((0,_objectSpread2.default)({},t),{},{allowClear:!1}),style:{width:"100%"},on:{change:function(e){i.onEndChange(e)},inputPressEnter:function(e){i.$emit("inputPressEnter",e)}}};return this.endValue&&(r.props.value=this.endValue),e?(n.props.disabledDate=function(e){return i.startDisabledDate(e)},r.props.disabledDate=function(e){return i.endDisabledDate(e)}):(n.scopedSlots={dateRender:function(e){var t=!1;return i.maxDate&&e?t=e>i.maxDate||i.min&&e<i.min:(i.min||i.max)&&(t=e<i.min||e>i.max),a("div",{class:["ant-calendar-date",t?"outside":""]},[e.date()])}},r.scopedSlots={dateRender:function(e){var t=!1;return i.minDate&&e?t=e<i.minDate||i.max&&e>i.max:(i.min||i.max)&&(t=e<i.min||e>i.max),a("div",{class:["ant-calendar-date",t?"outside":""]},[e.date()])}}),a("div",{class:"date-range-split"},[a("div",{class:"item"},[a("opu-date-picker",(0,_babelHelperVueJsxMergeProps.default)([{},n]))]),a("div",{class:"fh"},[" - "]),a("div",{class:"item"},[a("opu-date-picker",(0,_babelHelperVueJsxMergeProps.default)([{},r]))])])}};exports.default=_default;
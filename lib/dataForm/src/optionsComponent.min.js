"use strict";var _interopRequireDefault=require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/interopRequireDefault");require("core-js/modules/es.array.concat"),require("core-js/modules/es.array.map"),require("core-js/modules/es.number.constructor"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/esm/objectSpread2")),_utils=_interopRequireDefault(require("../../utils")),_conf=_interopRequireDefault(require("../conf"));function handleItemPropsOptions(e,t,a){var n=t||_conf.default.getSelectOptions.valueField,i=a||_conf.default.getSelectOptions.labelField;return e&&_utils.default.isArray(e)?_utils.default.clone(e).map(function(e){return n&&(e.value=e[n]),i&&(e.label=e[i]),e.children&&e.children.length&&(e.children=handleItemPropsOptions(e.children,n,i)),e}):e}var _default2={name:"optionsComponent",components:{},props:{renderName:{type:String,default:"a-input"},api:Function,param:{type:Object,default:function(){}},value:[Number,String,Object,Array],valueField:String,labelField:String,dataField:String,options:Array},model:{prop:"value",event:"update"},data:function(){return{optionsData:[]}},computed:{componentProps:function(){var i=this,e=this.$listeners,t=this.$options,a=this.optionsData,n=this.renderName,r=t.propsData,o={};_utils.default.each(e,function(e,n){o[n]=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];i.$emit.apply(i,[n].concat(t))}});var s={props:(0,_objectSpread2.default)({},r),on:(0,_objectSpread2.default)((0,_objectSpread2.default)({},o),{},{change:this.updateValue})};return"a-tree-select"===n?s.props.treeData=a:s.props.options=a,s}},created:function(){this.init()},methods:{init:function(){var e=this.api,t=this.param,a=this.valueField,n=this.labelField,i=this.options;e||t||i&&i.length&&(this.optionsData=handleItemPropsOptions(i,a,n))},updateValue:function(e){this.$emit("update",e),this.$emit("change",e)},fetchOptionsData:function(){var n=this,i=this.dataField,r=this.valueField,o=this.labelField,e=this.param,t=this.api;(t||_conf.default.getSelectOptions.api)(e).then(function(e){var t=i||_conf.default.getSelectOptions.dataField,a=handleItemPropsOptions(_utils.default.getObjData(t,e),r,o);n.optionsData=a})},setOptionsData:function(e){var t=handleItemPropsOptions(e,this.valueField,this.labelField);return this.optionsData=t},getOptionsData:function(){return this.optionsData}},render:function(e){var t=this.renderName,a=this.componentProps;return e(t,{props:(0,_objectSpread2.default)({},a.props),on:(0,_objectSpread2.default)({},a.on)},[])}};exports.default=_default2;
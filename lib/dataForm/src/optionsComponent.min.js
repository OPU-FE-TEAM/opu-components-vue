"use strict";var _interopRequireDefault=require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/interopRequireDefault");require("core-js/modules/es.array.concat"),require("core-js/modules/es.array.map"),require("core-js/modules/es.number.constructor"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/esm/objectSpread2")),_utils=_interopRequireDefault(require("../../utils")),_conf=_interopRequireDefault(require("../conf"));function handleItemPropsOptions(e,t,r){var o=t||_conf.default.getSelectOptions.valueField,n=r||_conf.default.getSelectOptions.labelField;return e&&_utils.default.isArray(e)?_utils.default.clone(e).map(function(e){return _utils.default.isObject(e)&&(o&&(e.value=e[o]+""),n&&(e.label=e[n]),e.children&&e.children.length&&(e.children=handleItemPropsOptions(e.children,o,n))),e}):e}var _default={name:"optionsComponent",components:{},props:{renderName:{type:String,default:"a-input"},value:[Number,String,Object,Array],valueField:String,labelField:String,dataField:String,options:Array,componentPropsData:Object},model:{prop:"value",event:"update"},data:function(){return{optionsData:[]}},computed:{componentProps:function(){var n=this,e=this.$listeners,t=this.$options,r=this.optionsData,o=this.renderName,a=this.componentPropsData,i=this.value,u=t.propsData,s={};_utils.default.each(e,function(e,o){s[o]=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.$emit.apply(n,[o].concat(t))}});var l=i;i&&_utils.default.isNumber(i)?l=i+"":i&&_utils.default.isArray(i)&&(l=i.map(function(e){return e+""}));var p={props:(0,_objectSpread2.default)((0,_objectSpread2.default)((0,_objectSpread2.default)({},a),u),{},{value:l}),on:(0,_objectSpread2.default)((0,_objectSpread2.default)({},s),{},{change:this.updateValue})};return"a-tree-select"===o?p.props.treeData=r:p.props.options=r,p}},created:function(){this.init()},methods:{init:function(){var e=this.valueField,t=this.labelField,r=this.options;r&&r.length&&(this.optionsData=handleItemPropsOptions(r,e,t))},updateValue:function(e){this.$emit("update",e),this.$emit("change",e)},setOptionsData:function(e){var t=handleItemPropsOptions(e,this.valueField,this.labelField);return this.optionsData=t},getOptionsData:function(){return this.optionsData},focus:function(){this.$refs.inputComponent.focus()}},render:function(e){var t=this.renderName,r=this.componentProps;return e(t,{ref:"inputComponent",props:(0,_objectSpread2.default)({},r.props),on:(0,_objectSpread2.default)({},r.on)},[])}};exports.default=_default;
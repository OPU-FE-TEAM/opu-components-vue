"use strict";var _interopRequireDefault=require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/interopRequireDefault");require("core-js/modules/es.array.concat"),require("core-js/modules/es.array.map"),require("core-js/modules/es.number.constructor"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/esm/objectSpread2")),_utils=_interopRequireDefault(require("../../utils")),_conf=_interopRequireDefault(require("../conf"));function handleItemPropsOptions(e,t,a){return(t||a)&&e&&_utils.default.isArray(e)?_utils.default.clone(e).map(function(e){return t&&(e.value=e[t]),a&&(e.label=e[a]),e.children&&e.children.length&&(e.children=handleItemPropsOptions(e.children,t,a)),e}):e}var _default2={name:"optionsComponent",components:{},props:{renderName:{type:String,default:"a-input"},api:Function,param:{type:Object,default:function(){}},value:[Number,String,Object,Array],valueField:String,labelField:String,dataField:String},model:{prop:"value",event:"update"},data:function(){return{optionsData:[]}},computed:{componentProps:function(){var n=this,e=this.$listeners,t=this.$options,a=this.optionsData,r=this.renderName,o=t.propsData,i={};_utils.default.each(e,function(e,r){i[r]=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];n.$emit.apply(n,[r].concat(t))}});var u={props:(0,_objectSpread2.default)({},o),on:(0,_objectSpread2.default)((0,_objectSpread2.default)({},i),{},{change:this.updateValue})};return"a-tree-select"===r?u.props.treeData=a:u.props.options=a,u}},created:function(){(this.api||this.param)&&this.fetchOptionsData()},methods:{updateValue:function(e){this.$emit("update",e),this.$emit("change",e)},fetchOptionsData:function(){var o=this,i=this.dataField,u=this.valueField,p=this.labelField,e=this.param,t=this.api;(t||_conf.default.getSelectOptions.api)(e).then(function(e){var t=u||_conf.default.getSelectOptions.valueField,a=p||_conf.default.getSelectOptions.labelField,r=i||_conf.default.getSelectOptions.dataField,n=handleItemPropsOptions(_utils.default.getObjData(r,e),t,a);o.optionsData=n})},setOptionsData:function(e){this.optionsData=e}},render:function(e){var t=this.renderName,a=this.componentProps;return e(t,{props:(0,_objectSpread2.default)({},a.props),on:(0,_objectSpread2.default)({},a.on)},[])}};exports.default=_default2;
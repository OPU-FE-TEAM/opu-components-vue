"use strict";var _interopRequireDefault=require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/interopRequireDefault");require("core-js/modules/es.array.concat"),require("core-js/modules/es.array.index-of"),require("core-js/modules/es.regexp.exec"),require("core-js/modules/es.string.split"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/esm/objectSpread2")),_interface=require("ant-design-vue/lib/date-picker/interface"),_utils=_interopRequireDefault(require("../../utils")),_default={name:"OpuDatePicker",components:{},props:(0,_objectSpread2.default)((0,_objectSpread2.default)({},(0,_interface.DatePickerProps)()),{},{min:[String,Object],max:[String,Object]}),model:{prop:"value",event:"update"},data:function(){return{}},computed:{componentProps:function(){var o=this,e=this.$listeners,t=this.$options,n=this.value,r=t.propsData,a={};_utils.default.each(e,function(e,r){a[r]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.$emit.apply(o,[r].concat(t))}});var i={props:(0,_objectSpread2.default)((0,_objectSpread2.default)({},r),{},{value:n}),on:(0,_objectSpread2.default)((0,_objectSpread2.default)({},a),{},{change:this.updateValue,openChange:this.onOpenChange})};return(this.min||this.max&&!i.props.disabledDate)&&(i.props.disabledDate=function(e){return o.renderDisabledDate(e)}),i}},created:function(){this.focus=_utils.default.throttle(function(){this.onFocus()},100)},methods:{updateValue:function(e){this.$emit("update",e),this.$emit("change",e)},onFocus:function(){var e=this.$refs.inputComponent.$el.getElementsByClassName("ant-calendar-picker-input");e&&e.length&&e[e.length-1].click();this.onInputEvent()},onInputEvent:function(){var o=this.componentProps,n=this;setTimeout(function(){var e=document.getElementsByClassName("ant-calendar-input");if(e&&e.length){var t=e[e.length-1];t.selectionStart=0,t.selectionEnd=t.value.length,t.addEventListener("keyup",function(e){"Enter"===e.key&&(e.stopPropagation(),n.$emit("inputPressEnter",e))}),t.oninput=function(e){if(e.target.value&&"deleteContentBackward"!==e.inputType){var t=e.target.value,n="-";if(o.props&&o.props.format&&(n=o.props.format.split("")[4]),4===t.length&&t.indexOf(n)<0?e.target.value=t+n:7===t.length&&-1<t.indexOf(n)&&2===t.split(n).length&&(e.target.value=t+n),o.props&&o.props.showTime){var r=":";o.props&&o.props.format&&(r=o.props.format.split("")[13]),10===t.length&&t.indexOf(" ")<0?e.target.value=t+" ":13===t.length&&t.indexOf(r)<0?e.target.value=t+r:16===t.length&&-1<t.indexOf(r)&&2===t.split(r).length&&(e.target.value=t+r)}}}}},100)},onOpenChange:function(e){e&&this.onInputEvent(),this.$emit("openChange",e)},renderDisabledDate:function(e){return this.min&&e?e<this.min||this.max&&e>this.max:this.min||this.max?e<this.min||e>this.max:void 0}},render:function(e){var t=this.componentProps,n=this.$scopedSlots;return e("a-date-picker",{ref:"inputComponent",props:(0,_objectSpread2.default)({},t.props),on:(0,_objectSpread2.default)({},t.on),scopedSlots:n},[])}};exports.default=_default;
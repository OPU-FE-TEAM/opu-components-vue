"use strict";var _interopRequireDefault=require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/interopRequireDefault");require("core-js/modules/es.array.concat"),require("core-js/modules/es.array.index-of"),require("core-js/modules/es.regexp.exec"),require("core-js/modules/es.string.split"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/esm/objectSpread2")),_index=require("ant-design-vue/lib/time-picker/index"),_utils=_interopRequireDefault(require("../../utils")),_default={name:"OpuTimePicker",components:{},props:(0,_objectSpread2.default)({},(0,_index.TimePickerProps)()),model:{prop:"value",event:"update"},data:function(){return{isOpen:!1}},computed:{componentProps:function(){var r=this,e=this.$listeners,t=this.$options,n=this.value,o=t.propsData,i={};return _utils.default.each(e,function(e,o){i[o]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.$emit.apply(r,[o].concat(t))}}),{props:(0,_objectSpread2.default)((0,_objectSpread2.default)({},o),{},{value:n}),on:(0,_objectSpread2.default)((0,_objectSpread2.default)({},i),{},{change:this.updateValue,openChange:this.onOpenChange})}}},created:function(){this.focus=_utils.default.throttle(function(){this.onFocus()},100)},methods:{updateValue:function(e){this.$emit("update",e),this.$emit("change",e)},onFocus:function(){var e=this.$refs.inputComponent.$el.getElementsByClassName("ant-time-picker-input");e&&e.length&&e[0].click(),this.onInputEvent()},onInputEvent:function(){var o=this.componentProps,t=this;setTimeout(function(){var e=document.getElementsByClassName("ant-time-picker-panel-input");e&&e.length&&(e[0].selectionStart=0,e[0].selectionEnd=e[0].value.length,e[0].addEventListener("keyup",function(e){"Enter"===e.key&&(e.stopPropagation(),t.isOpen=!1,t.$emit("inputPressEnter"))}),e[0].oninput=function(e){if(e.target.value&&"deleteContentBackward"!==e.inputType){var t=e.target.value,n=":";o.props&&o.props.format&&(n=o.props.format.split("")[3]),2===t.length&&t.indexOf(n)<0?e.target.value=t+n:5===t.length&&-1<t.indexOf(n)&&2===t.split(n).length&&(e.target.value=t+n)}})},100)},onOpenChange:function(e){(this.isOpen=e)&&this.onInputEvent(),this.$emit("openChange",e)}},render:function(e){var t=this.componentProps,n=this.$scopedSlots,o=this.isOpen;return e("a-time-picker",{ref:"inputComponent",props:(0,_objectSpread2.default)((0,_objectSpread2.default)({},t.props),{},{open:o}),on:(0,_objectSpread2.default)({},t.on),scopedSlots:n},[])}};exports.default=_default;
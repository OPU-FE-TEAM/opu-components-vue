"use strict";var _interopRequireDefault=require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/interopRequireDefault");require("core-js/modules/es.array.concat"),require("core-js/modules/es.array.find"),require("core-js/modules/es.array.find-index"),require("core-js/modules/es.array.index-of"),require("core-js/modules/es.array.map"),require("core-js/modules/es.number.constructor"),require("core-js/modules/es.object.to-string"),require("core-js/modules/es.regexp.to-string"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _toConsumableArray2=_interopRequireDefault(require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/esm/toConsumableArray")),_objectSpread2=_interopRequireDefault(require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/esm/objectSpread2")),_index=require("ant-design-vue/lib/select/index"),_utils=_interopRequireDefault(require("../../utils")),_conf=_interopRequireDefault(require("../conf"));function handleItemPropsOptions(e,t){var r=t.vF,o=t.lF;return e&&_utils.default.isArray(e)?_utils.default.clone(e).map(function(e){return r&&(e.value=e[r]+""),o&&(e.label=e[o]),e.children&&e.children.length&&(e.children=handleItemPropsOptions(e.children,t)),e}):e}var _default2={name:"OpuSelect",components:{},props:(0,_objectSpread2.default)((0,_objectSpread2.default)({},_index.SelectProps),{},{value:[Number,String,Object,Array],valueField:String,labelField:String,dataField:String,options:Array,searchFields:{type:Array,default:function(){return[]}}}),model:{prop:"value",event:"update"},data:function(){return{optionsData:[]}},computed:{vF:function(){return this.valueField?this.valueField:_conf.default.getSelectOptions.valueField},lF:function(){return this.labelField?this.labelField:_conf.default.getSelectOptions.labelField},componentProps:function(){var n=this,e=this.$listeners,t=this.$options,l=this.optionsData,r=this.value,p=this.searchFields,d=this.vF,c=this.lF,o=t.propsData,i={};_utils.default.each(e,function(e,o){i[o]=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.$emit.apply(n,[o].concat(t))}});var a=r;r&&_utils.default.isNumber(r)?a=r+"":r&&_utils.default.isArray(r)&&(a=r.map(function(e){return e+""}));var s={props:(0,_objectSpread2.default)((0,_objectSpread2.default)({},o),{},{value:a}),on:(0,_objectSpread2.default)((0,_objectSpread2.default)({},i),{},{change:this.updateValue})};return s.props.showSearch&&!s.props.filterOption&&(s.props.filterOption=function(e,t){for(var r=t.componentOptions.propsData.value,o=l.findIndex(function(e){return e[d].toString()===r}),n=l[o],i=!1,a=[d,c].concat((0,_toConsumableArray2.default)(p)),s=0;s<a.length;s++){var u=a[s];if(n[u]&&0<=n[u].toString().toLowerCase().indexOf(e.toLowerCase())){i=!0;break}}return i}),s.props.options=l,console.log(l),s}},created:function(){this.init()},methods:{init:function(){var e=this.options;e&&e.length&&(console.log(this.vF),this.optionsData=handleItemPropsOptions(e,this))},updateValue:function(t){var r=this.vF,e=this.optionsData.find(function(e){return e[r]==t});this.$emit("update",t,e),this.$emit("change",t,e)},setOptionsData:function(e){var t=handleItemPropsOptions(e,this);return this.optionsData=t},getOptionsData:function(){return this.optionsData},focus:function(){var e=this.$refs.inputComponent;e.focus();var t=e.$el.getElementsByClassName("ant-select-selection__rendered");t&&t.length&&t[0].click()}},render:function(e){var t=this.componentProps;return e("a-select",{ref:"inputComponent",props:(0,_objectSpread2.default)({},t.props),on:(0,_objectSpread2.default)({},t.on)},[])}};exports.default=_default2;
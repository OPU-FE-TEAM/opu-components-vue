"use strict";var _interopRequireDefault=require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/esm/objectSpread2")),_utils=_interopRequireDefault(require("../../utils")),_conf=_interopRequireDefault(require("../conf")),_dataForm=require("../../dataForm"),_default={name:"FormModal",components:{DataForm:_dataForm.DataForm},props:{form:{type:Object,required:!0},modal:Object},data:function(){return{visible:!1,loading:!1,confirmLoading:!1,readonly:!1,title:"",items:[]}},computed:{modalOpt:function(){var e=this.modal;return e&&e.props?(0,_objectSpread2.default)((0,_objectSpread2.default)({},_conf.default.modal.props),e.props):_conf.default.modal.props},formOpt:function(){var e=this.form;return e&&e.props?(0,_objectSpread2.default)((0,_objectSpread2.default)({},_conf.default.form.props),e.props):_conf.default.form.props}},created:function(){this.items=_utils.default.clone(this.formOpt.items,!0)},methods:{show:function(e){this.loading=!0,this.visible=!0,this.confirmLoading=!0,this.$nextTick(e)},setLoading:function(e){this.loading=e,this.confirmLoading=e},setFormData:function(e){this.$refs.form&&this.$refs.form.setData(e),this.loading=!1,this.confirmLoading=!1},onCancel:function(){this.visible=!1,this.$emit("cancel")},onSubmit:function(){var t=this;this.$refs.form.validateFields().then(function(e){t.$emit("submit",e),t.visible=!1})},setReadonly:function(e){this.readonly=e},setTitle:function(e){this.title=e},setItems:function(e){this.items=e}},render:function(e){var t=this.modalOpt,o=this.formOpt,i=this.visible,r=this.onSubmit,s=this.onCancel,a=this.loading,n=this.confirmLoading,l=this.$scopedSlots,d=this.readonly,u=this.title,f=this.items,p={props:(0,_objectSpread2.default)((0,_objectSpread2.default)({width:800},t),{},{title:u||t.title,confirmLoading:n,visible:i}),on:{cancel:s,ok:r},class:"crud-table-form-modal"};return d&&(p.props.okButtonProps={style:{display:"none"}}),e("a-modal",p,[e("a-spin",{props:{spinning:a}},[e("data-form",{ref:"form",props:(0,_objectSpread2.default)((0,_objectSpread2.default)({},o),{},{items:f,readonly:d}),class:"crud-table-form",scopedSlots:l})])])}};exports.default=_default;
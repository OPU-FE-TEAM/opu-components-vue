"use strict";var _interopRequireDefault=require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _objectSpread2=_interopRequireDefault(require("D:/OpenSource/OPU/opu-components-vue/node_modules/@babel/runtime/helpers/esm/objectSpread2")),_utils=_interopRequireDefault(require("../../utils")),_conf=_interopRequireDefault(require("../conf")),_dataForm=require("../../dataForm"),_default={name:"FormModal",components:{DataForm:_dataForm.DataForm},props:{form:{type:Object,required:!0},modal:Object},data:function(){return{visible:!1,loading:!1,confirmLoading:!1,readonly:!1,title:"",items:[]}},computed:{modalOpt:function(){var t=this.modal;return t&&t.props?(0,_objectSpread2.default)((0,_objectSpread2.default)({},_conf.default.modal.props),t.props):_conf.default.modal.props},formOpt:function(){var t=this.form;return t&&t.props?(0,_objectSpread2.default)((0,_objectSpread2.default)({},_conf.default.form.props),t.props):_conf.default.form.props}},created:function(){this.items=_utils.default.clone(this.formOpt.items,!0)},methods:{show:function(e){var o=this;this.loading=!0,this.visible=!0,this.confirmLoading=!0,this.$nextTick(function(){if(e){var t=e();t&&o.setFormData(t)}})},setLoading:function(t){this.loading=t,this.confirmLoading=t},setFormData:function(t){this.$refs.form&&this.$refs.form.setData(t),this.loading=!1,this.confirmLoading=!1},onCancel:function(){this.confirmLoading=!1,this.visible=!1,this.$emit("cancel")},onSubmit:function(){var e=this;this.confirmLoading=!0,this.$refs.form.validateFields().then(function(t){e.$emit("submit",t)})},setConfirmLoading:function(t){this.confirmLoading=t},setReadonly:function(t){this.readonly=t},setTitle:function(t){this.title=t},setItems:function(t){this.items=t}},render:function(t){var e=this.modalOpt,o=this.formOpt,i=this.visible,r=this.onSubmit,n=this.onCancel,a=this.loading,s=this.confirmLoading,d=this.$scopedSlots,l=this.readonly,u=this.title,f=this.items,p={props:(0,_objectSpread2.default)((0,_objectSpread2.default)({width:800},e),{},{title:u||e.title,confirmLoading:s,visible:i}),on:{cancel:n,ok:r},class:"crud-table-form-modal"};return l&&(p.props.okButtonProps={style:{display:"none"}}),t("a-modal",p,[t("a-spin",{props:{spinning:a}},[t("data-form",{ref:"form",props:(0,_objectSpread2.default)((0,_objectSpread2.default)({},o),{},{items:f,readonly:l}),class:"crud-table-form",scopedSlots:d})])])}};exports.default=_default;